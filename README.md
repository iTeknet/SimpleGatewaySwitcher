# SimpleGatewaySwitcher (简易网关切换器)

**SimpleGatewaySwitcher** 是一个超轻量级的 Windows 工具，专为需要频繁在「默认路由器 (DHCP)」和「旁路由/网关 (静态IP)」之间切换的用户设计。

无需安装庞大的 IDE，无需复杂的配置，通过一个 BAT 脚本即可现场编译生成 EXE 文件。特别适合折腾 OpenWrt、玩客云、N1 盒子的用户。

## 功能特点

* **极简主义**：基于原生 .NET Framework 4.0，单文件，体积仅 ~8KB。
* **一键编译**：提供 BAT 脚本，无需安装 Visual Studio，利用 Windows 自带编译器即可生成软件。
* **智能防呆**：自动检测管理员权限，防止因权限不足导致切换失败。
* **无残留**：编译完成后自动清理源代码，仅保留绿色的 EXE 执行文件。
* **防止多开**：优化了进程逻辑，解决了权限提权时的双窗口问题。

## 如何食用 (How to Use)

### 第一步：修改配置

右键编辑 `一键生成软件.bat`，在文件顶部的配置区域填入你自己的网络信息：

```csharp
// ================= 用户配置区域 =================
string NIC_NAME = "以太网";          // 你的网卡名称
string STATIC_IP = "192.168.1.200"; // 电脑的固定IP
string GATEWAY = "192.168.1.2";     // 你的旁路由/网关 IP
string DNS1 = "192.168.1.2";        // DNS 指向旁路由
// ===============================================
```


### 第二步：生成软件

双击运行 `一键生成软件.bat` (建议以管理员身份运行)。
脚本会自动在当前目录下生成 `NetSwitch.exe`。

### 第三步：开始使用

双击 `NetSwitch.exe`：

- 点击 **开启旁路由模式**：电脑会自动设定为静态 IP，网关指向你的旁路由（实现科学环境、去广告等功能）。

- 点击 **恢复默认**：电脑自动恢复为 DHCP 模式，由主路由分配 IP。

## 常见问题

**Q: 为什么生成的 EXE 有乱码？** A: 请确保 BAT 文件以 UTF-8 编码保存，代码中已内置 Unicode 转义字符，完美支持 Emoji 显示。

**Q: 提示找不到编译器？** A: 工具默认调用 Windows 自带的 .NET Framework v4.0.30319，适用于 Win7/Win10/Win11 绝大多数系统。

## 许可证

MIT License

